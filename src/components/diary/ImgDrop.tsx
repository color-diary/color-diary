'use client';

import React, { useCallback } from 'react';
import { useDropzone } from 'react-dropzone';
import useZustandStore from '@/zustand/zustandStore'; // zustand 스토어를 import

const ImgDrop = () => {
  const { setImg } = useZustandStore(); // Zustand 스토어의 setImg 함수 가져오기
  const [preview, setPreview] = React.useState<string | null>(null);

  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      const selectedFile = acceptedFiles[0];
      if (selectedFile) {
        setImg(selectedFile); // Zustand 스토어에 파일 저장
        setPreview(URL.createObjectURL(selectedFile)); // 미리보기 URL 설정
      }
    },
    [setImg]
  );

  const { getRootProps, getInputProps } = useDropzone({ onDrop });

  return (
    <div className="flex flex-col gap-3">
      <p>Q. 오늘 감정에 맞는 이미지가 있나요?</p>
      <div
        {...getRootProps()}
        className="flex w-[120px] h-[120px] bg-slate-400 items-center justify-center rounded-2xl border-4 border-dashed border-black"
      >
        <input {...getInputProps()} />
        {preview ? (
          <img src={preview} alt="Preview" className="w-full h-full object-cover rounded-2xl" />
        ) : (
          <div>카메라 svg</div>
        )}
      </div>
    </div>
  );
};

export default ImgDrop;

{
  /* <svg width="36" height="37" viewBox="0 0 36 37" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M14.6232 4.10001C14.1229 4.10002 13.6324 4.23905 13.2065 4.50159C12.7806 4.76413 12.436 5.13984 12.2112 5.58681L11.1492 7.70001H8.10718C6.9137 7.70001 5.76911 8.17411 4.9252 9.01803C4.08128 9.86194 3.60718 11.0065 3.60718 12.2V26.6C3.60718 27.7935 4.08128 28.9381 4.9252 29.782C5.76911 30.6259 6.9137 31.1 8.10718 31.1H17.28C16.986 30.5245 16.7491 29.9217 16.5726 29.3H8.10898C7.39289 29.3 6.70614 29.0155 6.19979 28.5092C5.69344 28.0028 5.40898 27.3161 5.40898 26.6V12.2C5.40898 11.4839 5.69344 10.7972 6.19979 10.2908C6.70614 9.78447 7.39289 9.50001 8.10898 9.50001H11.7054C11.8721 9.49967 12.0354 9.45304 12.1771 9.36532C12.3189 9.2776 12.4335 9.15224 12.5082 9.00321L13.8186 6.39501C13.8936 6.24604 14.0086 6.12086 14.1507 6.03345C14.2928 5.94605 14.4564 5.89984 14.6232 5.90001H21.3984C21.5657 5.89968 21.7298 5.94599 21.8722 6.03375C22.0147 6.1215 22.1298 6.24723 22.2048 6.39681L23.5062 9.00141C23.581 9.15071 23.6959 9.27625 23.838 9.36399C23.9801 9.45173 24.1438 9.4982 24.3108 9.49821H27.909C28.6251 9.49821 29.3118 9.78267 29.8182 10.289C30.3245 10.7954 30.609 11.4821 30.609 12.1982V17.7836C31.2546 18.1148 31.8546 18.5102 32.409 18.9698V12.1982C32.409 11.0047 31.9349 9.86014 31.091 9.01623C30.247 8.17231 29.1025 7.69821 27.909 7.69821H24.867L23.814 5.59221C23.5896 5.14368 23.2448 4.7665 22.8182 4.50294C22.3915 4.23938 21.8999 4.09986 21.3984 4.10001H14.6232ZM18 11.3C19.6074 11.2994 21.1688 11.8368 22.4355 12.8265C23.7021 13.8162 24.6012 15.2013 24.9894 16.7612C24.3909 16.8285 23.7999 16.9502 23.2236 17.1248C22.9817 16.2059 22.5017 15.367 21.832 14.6928C21.1623 14.0186 20.3267 13.5331 19.4094 13.2851C18.492 13.0371 17.5255 13.0355 16.6074 13.2804C15.6892 13.5253 14.852 14.0081 14.18 14.6801C13.5081 15.352 13.0253 16.1893 12.7804 17.1074C12.5355 18.0256 12.5371 18.9921 12.7851 19.9094C13.033 20.8267 13.5186 21.6624 14.1928 22.3321C14.8669 23.0017 15.7058 23.4817 16.6248 23.7236C16.4502 24.2993 16.3285 24.8898 16.2612 25.4876C14.5604 25.0578 13.0749 24.0221 12.0834 22.5749C11.0919 21.1278 10.6626 19.3685 10.876 17.6273C11.0894 15.886 11.9308 14.2825 13.2425 13.1176C14.5541 11.9526 16.2457 11.3064 18 11.3ZM34.2 26.6C34.2 28.7483 33.3466 30.8085 31.8275 32.3276C30.3085 33.8466 28.2482 34.7 26.1 34.7C23.9517 34.7 21.8915 33.8466 20.3724 32.3276C18.8534 30.8085 18 28.7483 18 26.6C18 24.4518 18.8534 22.3915 20.3724 20.8724C21.8915 19.3534 23.9517 18.5 26.1 18.5C28.2482 18.5 30.3085 19.3534 31.8275 20.8724C33.3466 22.3915 34.2 24.4518 34.2 26.6ZM27 23C27 22.7613 26.9052 22.5324 26.7364 22.3636C26.5676 22.1948 26.3387 22.1 26.1 22.1C25.8613 22.1 25.6324 22.1948 25.4636 22.3636C25.2948 22.5324 25.2 22.7613 25.2 23V25.7H22.5C22.2613 25.7 22.0324 25.7948 21.8636 25.9636C21.6948 26.1324 21.6 26.3613 21.6 26.6C21.6 26.8387 21.6948 27.0676 21.8636 27.2364C22.0324 27.4052 22.2613 27.5 22.5 27.5H25.2V30.2C25.2 30.4387 25.2948 30.6676 25.4636 30.8364C25.6324 31.0052 25.8613 31.1 26.1 31.1C26.3387 31.1 26.5676 31.0052 26.7364 30.8364C26.9052 30.6676 27 30.4387 27 30.2V27.5H29.7C29.9387 27.5 30.1676 27.4052 30.3364 27.2364C30.5052 27.0676 30.6 26.8387 30.6 26.6C30.6 26.3613 30.5052 26.1324 30.3364 25.9636C30.1676 25.7948 29.9387 25.7 29.7 25.7H27V23Z"
  fill="black"
/>
</svg> */
}
